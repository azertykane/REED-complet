{% extends "base.html" %}

{% block title %}Informations - REED{% endblock %}

{% block extra_css %}
<style>
    /* Animation pour les cartes */
    @keyframes fadeInUp {
        from {
            opacity: 0;
            transform: translateY(30px);
        }
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }
    
    @keyframes float {
        0%, 100% {
            transform: translateY(0);
        }
        50% {
            transform: translateY(-10px);
        }
    }
    
    .animate-fade-in {
        animation: fadeInUp 0.8s ease-out forwards;
        opacity: 0;
    }
    
    .animate-delay-1 {
        animation-delay: 0.2s;
    }
    
    .animate-delay-2 {
        animation-delay: 0.4s;
    }
    
    .animate-delay-3 {
        animation-delay: 0.6s;
    }
    
    .floating {
        animation: float 3s ease-in-out infinite;
    }
    
    /* Custom styles */
    .hero-info {
        background: linear-gradient(135deg, var(--primary-blue) 0%, var(--secondary-blue) 100%);
        color: white;
        padding: 5rem 0 3rem;
        position: relative;
        overflow: hidden;
    }
    
    .hero-info::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: url("data:image/svg+xml,%3Csvg width='100' height='100' viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M11 18c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm48 25c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm-43-7c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm63 31c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zM34 90c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm56-76c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zM12 86c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm28-65c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm23-11c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm-6 60c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm29 22c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zM32 63c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm57-13c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm-9-21c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM60 91c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM35 41c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM12 60c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2z' fill='%23ffffff' fill-opacity='0.05' fill-rule='evenodd'/%3E%3C/svg%3E");
        opacity: 0.3;
    }
    
    .info-card {
        background: white;
        border-radius: 20px;
        overflow: hidden;
        box-shadow: 0 15px 35px rgba(0,0,0,0.1);
        transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        height: 100%;
        border: none;
    }
    
    .info-card:hover {
        transform: translateY(-15px);
        box-shadow: 0 25px 50px rgba(0,0,0,0.15);
    }
    
    .card-image {
        height: 250px;
        overflow: hidden;
        position: relative;
    }
    
    .card-image img {
        width: 100%;
        height: 100%;
        object-fit: cover;
        transition: transform 0.6s ease;
    }
    
    .info-card:hover .card-image img {
        transform: scale(1.1);
    }
    
    .image-overlay {
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: linear-gradient(to top, rgba(0,0,0,0.7), transparent);
        display: flex;
        align-items: flex-end;
        padding: 1.5rem;
        color: white;
    }
    
    .icon-container {
        width: 70px;
        height: 70px;
        background: white;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        margin: -35px auto 1.5rem;
        position: relative;
        z-index: 2;
        box-shadow: 0 10px 25px rgba(0,0,0,0.1);
        color: var(--primary-blue);
        font-size: 1.8rem;
    }
    
    /* Section des appartements */
    .apartments-section {
        background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);
        position: relative;
        overflow: hidden;
    }
    
    .apartments-section::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 1px;
        background: linear-gradient(90deg, transparent, var(--light-blue), transparent);
    }
    
    .apartment-card {
        background: white;
        border-radius: 15px;
        padding: 2rem;
        box-shadow: 0 10px 30px rgba(0,0,0,0.08);
        transition: all 0.3s ease;
        height: 100%;
        border: 2px solid transparent;
    }
    
    .apartment-card:hover {
        border-color: var(--secondary-blue);
        box-shadow: 0 15px 35px rgba(59, 130, 246, 0.15);
        transform: translateY(-5px);
    }
    
    .apartment-features {
        display: flex;
        gap: 1.5rem;
        margin-top: 1.5rem;
        flex-wrap: wrap;
    }
    
    .feature-badge {
        background: var(--light-blue);
        color: var(--primary-blue);
        padding: 0.5rem 1rem;
        border-radius: 50px;
        font-weight: 600;
        font-size: 0.9rem;
        display: inline-flex;
        align-items: center;
        gap: 0.5rem;
    }
    
    /* Modal confirmation */
    .confirmation-modal {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(0,0,0,0.8);
        z-index: 9999;
        backdrop-filter: blur(5px);
        align-items: center;
        justify-content: center;
        animation: fadeIn 0.5s ease-out;
    }
    
    @keyframes fadeIn {
        from { opacity: 0; }
        to { opacity: 1; }
    }
    
    .confirmation-content {
        background: white;
        border-radius: 25px;
        max-width: 500px;
        width: 90%;
        overflow: hidden;
        animation: slideUp 0.6s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        box-shadow: 0 30px 60px rgba(0,0,0,0.3);
    }
    
    @keyframes slideUp {
        from {
            opacity: 0;
            transform: translateY(50px) scale(0.9);
        }
        to {
            opacity: 1;
            transform: translateY(0) scale(1);
        }
    }
    
    .confetti {
        position: absolute;
        width: 10px;
        height: 10px;
        background: var(--primary-yellow);
        opacity: 0;
    }
    
    /* Section info */
    .info-section {
        background: white;
        border-radius: 20px;
        padding: 3rem;
        box-shadow: 0 20px 40px rgba(0,0,0,0.08);
        position: relative;
        overflow: hidden;
    }
    
    .info-section::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        width: 5px;
        height: 100%;
        background: linear-gradient(to bottom, var(--primary-blue), var(--secondary-blue));
    }
    
    .info-item {
        display: flex;
        align-items: center;
        margin-bottom: 2rem;
        padding: 1.5rem;
        border-radius: 15px;
        background: var(--light-gray);
        transition: all 0.3s ease;
    }
    
    .info-item:hover {
        background: var(--light-blue);
        transform: translateX(10px);
    }
    
    .info-icon {
        width: 60px;
        height: 60px;
        background: var(--gradient-primary);
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        margin-right: 1.5rem;
        color: white;
        font-size: 1.5rem;
        flex-shrink: 0;
    }
    
    /* Scroll animation */
    .scroll-reveal {
        opacity: 0;
        transform: translateY(30px);
        transition: all 0.8s cubic-bezier(0.215, 0.61, 0.355, 1);
    }
    
    .scroll-reveal.visible {
        opacity: 1;
        transform: translateY(0);
    }
    
    /* Badge pour utilisateur inscrit */
    .user-badge {
        background: linear-gradient(135deg, var(--primary-yellow) 0%, var(--secondary-yellow) 100%);
        color: white;
        padding: 0.5rem 1.5rem;
        border-radius: 50px;
        font-weight: 600;
        display: inline-flex;
        align-items: center;
        gap: 0.5rem;
        box-shadow: 0 4px 15px rgba(251, 191, 36, 0.3);
    }
</style>
{% endblock %}

{% block content %}
<!-- Hero Section -->
<div class="hero-info text-center">
    <div class="container position-relative">
        <div class="floating">
            <i class="fas fa-info-circle fa-4x mb-4"></i>
        </div>
        <h1 class="display-4 fw-bold mb-3 animate-fade-in">Informations Pratiques</h1>
        <p class="lead mb-0 animate-fade-in animate-delay-1">Tout ce que vous devez savoir sur l'accompagnement, le logement et la vie étudiante</p>
        
        {% if est_inscrit %}
        <div class="mt-4 animate-fade-in animate-delay-2">
            <div class="user-badge">
                <i class="fas fa-crown"></i>
                <span>Membre Privilégié - Accès Complet</span>
            </div>
        </div>
        {% endif %}
    </div>
</div>

<!-- Message de confirmation (afficher seulement si flash message existe) -->
{% with messages = get_flashed_messages(with_categories=true) %}
    {% for category, message in messages if category == 'success' %}
    <div id="confirmationMessage" class="alert alert-success alert-dismissible fade show mb-0 text-center">
        <div class="container">
            <i class="fas fa-check-circle fa-2x me-3"></i>
            <strong>{{ message }}</strong>
            <button type="button" class="btn-close" onclick="hideConfirmation()"></button>
        </div>
    </div>
    {% endfor %}
{% endwith %}

<!-- Section des 3 images -->
<section class="py-5">
    <div class="container">
        <div class="row mb-5">
            <div class="col-12 text-center">
                <h2 class="section-title fw-bold display-6">Nos Services Étudiants</h2>
                <p class="lead text-muted">Découvrez notre accompagnement complet pour votre réussite</p>
            </div>
        </div>
        
        <div class="row g-4">
            <!-- Carte 1 : Accompagnement Scolaire -->
            <div class="col-lg-4 animate-fade-in">
                <div class="info-card">
                    <div class="card-image">
                        <img src="/static/acommpagnement.jpeg" alt="Accompagnement scolaire" onerror="this.src='https://images.unsplash.com/photo-1523050854058-8df90110c9f1?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80'">
                        <div class="image-overlay">
                            <h3 class="h4 fw-bold mb-0">Accompagnement Scolaire</h3>
                        </div>
                    </div>
                    <div class="card-body p-4">
                        <div class="icon-container">
                            <i class="fas fa-graduation-cap"></i>
                        </div>
                        <h4 class="card-title text-center mb-3 fw-bold">Soutien Académique</h4>
                        <ul class="list-unstyled">
                            <li class="mb-2"><i class="fas fa-check-circle text-success me-2"></i>Tutorat personnalisé</li>
                            <li class="mb-2"><i class="fas fa-check-circle text-success me-2"></i>Bibliothèque numérique</li>
                            <li class="mb-2"><i class="fas fa-check-circle text-success me-2"></i>Ateliers méthodologiques</li>
                            <li class="mb-2"><i class="fas fa-check-circle text-success me-2"></i>Préparation aux examens</li>
                            <li><i class="fas fa-check-circle text-success me-2"></i>Orientation professionnelle</li>
                        </ul>
                    </div>
                </div>
            </div>
            
            <!-- Carte 2 : Logement Étudiant -->
            <div class="col-lg-4 animate-fade-in animate-delay-1">
                <div class="info-card">
                    <div class="card-image">
                        <img src="/static/sociale.jpeg" alt="Logement étudiant" onerror="this.src='https://images.unsplash.com/photo-1555854877-bab0e564b8d5?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80'">
                        <div class="image-overlay">
                            <h3 class="h4 fw-bold mb-0">Logement Étudiant</h3>
                        </div>
                    </div>
                    <div class="card-body p-4">
                        <div class="icon-container">
                            <i class="fas fa-home"></i>
                        </div>
                        <h4 class="card-title text-center mb-3 fw-bold">Résidences Étudiantes</h4>
                        <ul class="list-unstyled">
                            <li class="mb-2"><i class="fas fa-check-circle text-success me-2"></i>Chambres meublées</li>
                            <li class="mb-2"><i class="fas fa-check-circle text-success me-2"></i>Wi-Fi haute vitesse</li>
                            <li class="mb-2"><i class="fas fa-check-circle text-success me-2"></i>Sécurité 24/7</li>
                            <li class="mb-2"><i class="fas fa-check-circle text-success me-2"></i>Espaces communs</li>
                        </ul>
                    </div>
                </div>
            </div>
            
            <!-- Carte 3 : Vie Étudiante -->
            <div class="col-lg-4 animate-fade-in animate-delay-2">
                <div class="info-card">
                    <div class="card-image">
                        <img src="https://images.unsplash.com/photo-1541339907198-e08756dedf3f?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80" alt="Vie étudiante">
                        <div class="image-overlay">
                            <h3 class="h4 fw-bold mb-0">Vie Étudiante</h3>
                        </div>
                    </div>
                    <div class="card-body p-4">
                        <div class="icon-container">
                            <i class="fas fa-users"></i>
                        </div>
                        <h4 class="card-title text-center mb-3 fw-bold">Activités & Événements</h4>
                        <ul class="list-unstyled">
                            <li class="mb-2"><i class="fas fa-check-circle text-success me-2"></i>Club sportif universitaire</li>
                            <li class="mb-2"><i class="fas fa-check-circle text-success me-2"></i>Événements culturels</li>
                            <li class="mb-2"><i class="fas fa-check-circle text-success me-2"></i>Workshops professionnels</li>
                            <li class="mb-2"><i class="fas fa-check-circle text-success me-2"></i>Sorties découvertes</li>
                            <li><i class="fas fa-check-circle text-success me-2"></i>Réseau d'anciens élèves</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Section Informations Détaillées -->
<section class="py-5 bg-light">
    <div class="container">
        <div class="row mb-5">
            <div class="col-12 text-center">
                <h2 class="section-title fw-bold display-6">Accompagnement & Logement</h2>
                <p class="lead text-muted">Un accompagnement complet pour votre réussite universitaire</p>
            </div>
        </div>
        
        <div class="info-section scroll-reveal">
            <div class="row">
                <div class="col-lg-6">
                    <h3 class="fw-bold mb-4 text-primary"><i class="fas fa-hands-helping me-2"></i>Accompagnement Personnalisé</h3>
                    <div class="info-item">
                        <div class="info-icon">
                            <i class="fas fa-user-graduate"></i>
                        </div>
                        <div>
                            <h5 class="fw-bold mb-1">Mentorat Étudiant</h5>
                            <p class="mb-0">Des étudiants expérimentés vous guident dans votre parcours académique.</p>
                        </div>
                    </div>
                    
                    <div class="info-item">
                        <div class="info-icon">
                            <i class="fas fa-book-open"></i>
                        </div>
                        <div>
                            <h5 class="fw-bold mb-1">Ressources Pédagogiques</h5>
                            <p class="mb-0">Accès à une plateforme numérique avec cours, exercices et corrigés.</p>
                        </div>
                    </div>
                    
                    <div class="info-item">
                        <div class="info-icon">
                            <i class="fas fa-chart-line"></i>
                        </div>
                        <div>
                            <h5 class="fw-bold mb-1">Suivi Personnalisé</h5>
                            <p class="mb-0">Évaluations régulières et plan d'action adapté à vos besoins.</p>
                        </div>
                    </div>
                </div>
                
                <div class="col-lg-6">
                    <h3 class="fw-bold mb-4 text-primary"><i class="fas fa-bed me-2"></i>Solutions de Logement</h3>
                    <div class="info-item">
                        <div class="info-icon">
                            <i class="fas fa-building"></i>
                        </div>
                        <div>
                            <h5 class="fw-bold mb-1">Résidences Universitaires</h5>
                            <p class="mb-0">Chambres individuelles et partagées dans des résidences sécurisées.</p>
                        </div>
                    </div>
                    
                    <div class="info-item">
                        <div class="info-icon">
                            <i class="fas fa-handshake"></i>
                        </div>
                        <div>
                            <h5 class="fw-bold mb-1">Colocations Étudiantes</h5>
                            <p class="mb-0">Trouvez vos futurs colocataires et partagez un logement équipé.</p>
                        </div>
                    </div>
                    
                    <div class="info-item">
                        <div class="info-icon">
                            <i class="fas fa-cogs"></i>
                        </div>
                        <div>
                            <h5 class="fw-bold mb-1">Services Inclus</h5>
                            <p class="mb-0">Wi-Fi, ménage, maintenance, laverie, et espaces de détente.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Section des Appartements (visible après inscription) -->
<section id="apartmentsSection" class="py-5 apartments-section" style="{% if not est_inscrit %}display: none;{% endif %}">
    <div class="container">
        <div class="row mb-5">
            <div class="col-12 text-center">
                <h2 class="section-title fw-bold display-6">Appartements Disponibles</h2>
                <p class="lead text-muted">Découvrez notre sélection d'appartements pour étudiants</p>
                <div class="alert alert-info d-inline-flex align-items-center">
                    <i class="fas fa-star me-2"></i>
                    Réservé exclusivement aux résidents
                </div>
            </div>
        </div>
        
        <div class="row g-4">
            <!-- Appartement 1 -->
            <div class="col-md-6 col-lg-4 scroll-reveal">
                <div class="apartment-card">
                    <div class="d-flex justify-content-between align-items-start mb-3">
                        <div>
                            <h4 class="fw-bold mb-1">Chambres Étudiantes</h4>
                            <p class="text-muted mb-0"><i class="fas fa-map-marker-alt me-1"></i> Quartier Universitaire</p>
                        </div>
                        <span class="badge bg-success fs-6">Disponible</span>
                    </div>
                    
                    <div class="position-relative mb-3">
                        <img src="https://images.unsplash.com/photo-1558036117-15e82a2c9a9a?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80" 
                             alt="Studio" class="img-fluid rounded" style="height: 200px; width: 100%; object-fit: cover;">
                        <div class="position-absolute bottom-0 start-0 bg-primary text-white px-3 py-1 rounded-end">
                            <strong>À partir de 35 000 FCFA/mois</strong>
                        </div>
                    </div>
                    
                    <p class="text-muted mb-3">Chambres simples et chambres avec salle de bain privée. Idéal pour les étudiants.</p>
                    
                    <div class="apartment-features">
                        <span class="feature-badge"><i class="fas fa-bed"></i>  lits</span>
                        <span class="feature-badge"><i class="fas fa-wifi"></i> Wi-Fi inclus</span>
                        <span class="feature-badge"><i class="fas fa-utensils"></i> Cuisine commune</span>
                    </div>
                    
                    <button class="btn btn-primary w-100 mt-3" onclick="showInterest(1)">
                        <i class="fas fa-heart me-2"></i>Exprimer son intérêt
                    </button>
                </div>
            </div>
            
            <!-- Appartement 2 -->
            <div class="col-md-6 col-lg-4 scroll-reveal">
                <div class="apartment-card">
                    <div class="d-flex justify-content-between align-items-start mb-3">
                        <div>
                            <h4 class="fw-bold mb-1">Studios Modernes</h4>
                            <p class="text-muted mb-0"><i class="fas fa-map-marker-alt me-1"></i> Centre-ville</p>
                        </div>
                        <span class="badge bg-warning text-dark fs-6">Bientôt disponible</span>
                    </div>
                    
                    <div class="position-relative mb-3">
                        <img src="https://images.unsplash.com/photo-1522771739844-6a9f6d5f14af?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80" 
                             alt="Appartement T2" class="img-fluid rounded" style="height: 200px; width: 100%; object-fit: cover;">
                        <div class="position-absolute bottom-0 start-0 bg-primary text-white px-3 py-1 rounded-end">
                            <strong>À partir de 55 000 FCFA/mois</strong>
                        </div>
                    </div>
                    
                    <p class="text-muted mb-3">Studios entièrement équipés avec kitchenette et salle de bain. Parfait pour l'indépendance.</p>
                    
                    <div class="apartment-features">
                        <span class="feature-badge"><i class="fas fa-ruler-combined"></i> 25-35 m²</span>
                        <span class="feature-badge"><i class="fas fa-bed"></i> Studio</span>
                        <span class="feature-badge"><i class="fas fa-tv"></i> Meublé</span>
                    </div>
                    
                    <button class="btn btn-outline-primary w-100 mt-3" onclick="showInterest(2)">
                        <i class="fas fa-bell me-2"></i>Être notifié
                    </button>
                </div>
            </div>
            
            <!-- Appartement 3 -->
            <div class="col-md-6 col-lg-4 scroll-reveal">
                <div class="apartment-card">
                    <div class="d-flex justify-content-between align-items-start mb-3">
                        <div>
                            <h4 class="fw-bold mb-1">Colocations</h4>
                            <p class="text-muted mb-0"><i class="fas fa-map-marker-alt me-1"></i> Campus Principal</p>
                        </div>
                        <span class="badge bg-success fs-6">Disponible</span>
                    </div>
                    
                    <div class="position-relative mb-3">
                        <img src="https://images.unsplash.com/photo-1555854877-bab0e564b8d5?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80" 
                             alt="Colocation" class="img-fluid rounded" style="height: 200px; width: 100%; object-fit: cover;">
                        <div class="position-absolute bottom-0 start-0 bg-primary text-white px-3 py-1 rounded-end">
                            <strong>25 000 FCFA/personne</strong>
                        </div>
                    </div>
                    
                    <p class="text-muted mb-3">Colocations de 3-4 chambres avec salon spacieux et cuisine entièrement équipée.</p>
                    
                    <div class="apartment-features">
                        <span class="feature-badge"><i class="fas fa-users"></i> 3-4 colocataires</span>
                        <span class="feature-badge"><i class="fas fa-car"></i> Parking</span>
                        <span class="feature-badge"><i class="fas fa-dumbbell"></i> Espace sport</span>
                    </div>
                    
                    <button class="btn btn-primary w-100 mt-3" onclick="showInterest(3)">
                        <i class="fas fa-heart me-2"></i>Exprimer son intérêt
                    </button>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Section Inscription pour accéder aux appartements (visible seulement si non inscrit) -->
{% if not est_inscrit %}
<section id="registrationSection" class="py-5">
    <div class="container">
        <div class="row justify-content-center">
            <div class="col-lg-8">
                <div class="card border-0 shadow-lg">
                    <div class="card-body p-5 text-center">
                        <div class="mb-4">
                            <div class="icon-container mx-auto">
                                <i class="fas fa-lock"></i>
                            </div>
                        </div>
                        
                        <h3 class="fw-bold mb-3">Accédez à la liste complète des appartements</h3>
                        <p class="lead text-muted mb-4">
                            Complétez votre inscription pour découvrir tous nos logements étudiants disponibles 
                            et bénéficier de notre accompagnement personnalisé.
                        </p>
                        
                        <div class="d-grid gap-3 col-lg-6 mx-auto">
                            <a href="{{ url_for('formulaire') }}" class="btn btn-primary btn-lg py-3">
                                <i class="fas fa-user-plus me-2"></i>Compléter mon inscription
                            </a>
                        </div>
                        
                        <div class="mt-4">
                            <small class="text-muted">
                                <i class="fas fa-shield-alt me-1"></i>
                                Vos données sont sécurisées et ne seront pas partagées
                            </small>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
{% endif %}

<!-- Modal de confirmation d'intérêt -->
<div id="interestModal" class="confirmation-modal">
    <div class="confirmation-content">
        <div class="p-5 text-center">
            <div class="mb-4">
                <div class="icon-container mx-auto bg-success">
                    <i class="fas fa-heart text-white"></i>
                </div>
            </div>
            
            <h3 class="fw-bold mb-3">Intérêt enregistré !</h3>
            <p class="text-muted mb-4">
                Nous avons bien pris en compte votre intérêt pour cet appartement.
                Notre équipe vous contactera dans les 48 heures pour organiser une visite.
            </p>
            
            <button class="btn btn-primary btn-lg w-100 py-3" onclick="closeInterestModal()">
                <i class="fas fa-check me-2"></i>Parfait !
            </button>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
// Animation au chargement de la page
document.addEventListener('DOMContentLoaded', function() {
    // Animation des éléments avec délai
    const animatedElements = document.querySelectorAll('.animate-fade-in');
    animatedElements.forEach((el, index) => {
        setTimeout(() => {
            el.style.animationPlayState = 'running';
        }, index * 200);
    });
    
    // Observer pour l'animation au scroll
    const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                entry.target.classList.add('visible');
            }
        });
    }, { threshold: 0.1 });
    
    document.querySelectorAll('.scroll-reveal').forEach(el => observer.observe(el));
    
    // Afficher les confettis si message de succès
    const successMessage = document.getElementById('confirmationMessage');
    if (successMessage) {
        createConfetti();
        
        // Scroller vers la section des appartements si l'utilisateur est inscrit
        {% if est_inscrit %}
        setTimeout(() => {
            const apartmentsSection = document.getElementById('apartmentsSection');
            if (apartmentsSection) {
                apartmentsSection.scrollIntoView({
                    behavior: 'smooth',
                    block: 'start'
                });
            }
        }, 1500);
        {% endif %}
    }
});

// Fonction pour cacher la confirmation
function hideConfirmation() {
    const message = document.getElementById('confirmationMessage');
    if (message) {
        message.style.opacity = '0';
        message.style.transform = 'translateY(-20px)';
        
        setTimeout(() => {
            message.style.display = 'none';
        }, 500);
    }
}

// Fonction pour montrer l'intérêt pour un appartement
function showInterest(apartmentId) {
    const modal = document.getElementById('interestModal');
    modal.style.display = 'flex';
    
    // Animation de confettis
    createConfetti();
    
    // Enregistrer l'intérêt (dans une vraie app, cela enverrait une requête au serveur)
    console.log(`Intérêt enregistré pour l'appartement ${apartmentId}`);
    
    // Ici, vous pourriez ajouter un appel AJAX pour sauvegarder l'intérêt
    // fetch('/api/interet-apartement', {
    //     method: 'POST',
    //     headers: {'Content-Type': 'application/json'},
    //     body: JSON.stringify({apartment_id: apartmentId})
    // });
}

// Fonction pour fermer le modal d'intérêt
function closeInterestModal() {
    const modal = document.getElementById('interestModal');
    modal.style.opacity = '0';
    
    setTimeout(() => {
        modal.style.display = 'none';
        modal.style.opacity = '1';
    }, 500);
}

// Fonction pour créer des confettis
function createConfetti() {
    const colors = ['#3B82F6', '#10B981', '#F59E0B', '#EF4444', '#8B5CF6'];
    
    for (let i = 0; i < 50; i++) {
        const confetti = document.createElement('div');
        confetti.className = 'confetti';
        confetti.style.left = Math.random() * 100 + 'vw';
        confetti.style.top = '-10px';
        confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
        confetti.style.transform = `rotate(${Math.random() * 360}deg)`;
        
        document.body.appendChild(confetti);
        
        // Animation
        const animation = confetti.animate([
            { 
                top: '-10px', 
                opacity: 1,
                transform: `rotate(${Math.random() * 360}deg) translateX(0)`
            },
            { 
                top: '100vh', 
                opacity: 0,
                transform: `rotate(${Math.random() * 720}deg) translateX(${Math.random() * 200 - 100}px)`
            }
        ], {
            duration: Math.random() * 3000 + 2000,
            easing: 'cubic-bezier(0.215, 0.61, 0.355, 1)'
        });
        
        // Supprimer après animation
        animation.onfinish = () => confetti.remove();
    }
}

// Fermer le modal en cliquant à l'extérieur
window.addEventListener('click', function(e) {
    const modal = document.getElementById('interestModal');
    if (e.target === modal) {
        closeInterestModal();
    }
});
</script>
{% endblock %}